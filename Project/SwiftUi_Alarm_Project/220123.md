## Progress

### 수학 미션 게임 로직 & 뷰 완성
###VIEW
```swift 
//
//  MathGameScreen.swift
//  Alarm
//
//  Created by 이해주 on 2022/01/17.
//

import SwiftUI

struct MathGameScreen: View {
    @ObservedObject var game: Math // VM
    @Environment(\.presentationMode) var presentationMode // goBack() 로직을 실행하기 위한 설정
    var body: some View {
        NavigationView {
            ZStack {
                Color.darkBackground.ignoresSafeArea()
                VStack {
                    GameNumIndicator(currentRound: game.currentRound, totalRound: game.totalRound)
                    ProblemIndicator(game: $game.model.mathGame, level: game.level)
                    AnswerTextField(game: game)
                    Spacer()
                    BottomDivStackButton(isDivided: false, leftTitle: nil, leftAction: goBack, rightTitle: "완료", rightAction: goBack)
                }
                .padding(.horizontal, 20)
            }.alert("기상 미션에 성공하셨습니다", isPresented: $game.isFinished) {
                // 모든 라운드를 성공적으로 진행하였을 때 보여지는 팝업 알림창
                Button("확인") {
                    goBack()
                }
            }
            .hiddenNavBarStyle()
         
        }.hiddenNavBarStyle()
    }
    
    
    // 이전 스크린으로 돌아가는 Navigation 로직
    func goBack(){
          self.presentationMode.wrappedValue.dismiss()
      }
}

// 수학 문제를 보여주는 뷰
struct ProblemIndicator: View {
    @Binding var game: Math.Math
    var level: Int
    var body: some View {
        switch level {
        case 0...2:
            Text("\(game.firstN) + \(game.secondN)").responsiveTextify(30, .bold)
        case 3:
            Text("\(game.firstN) X \(game.secondN) + \(game.thirdN!)").responsiveTextify(30, .bold)
        case 4:
            Text("\(game.firstN) X \(game.secondN) X \(game.thirdN!)").responsiveTextify(30, .bold)
        default :
            Text("값이 정확히 입력되어 있지 않습니다.").responsiveTextify(30, .bold)
        }
    }
}




// 수학 문제 답을 입력하는 뷰
struct AnswerTextField: View {
    var game: Math
    @State private var textInput = ""
    var body: some View {
        ZStack {
            RoundedRectangle(cornerRadius: 14)
            HStack (alignment: .center) {
                Spacer()
                Text("=")
                TextField("", text: $textInput)
                    .onChange(of: textInput) { newValue in
                        print(newValue)
                    }
                    .multilineTextAlignment(.trailing)
                    .keyboardType(.numberPad)
                    .placeholder(when: textInput.isEmpty) {
                        Text("입력")
                            .foregroundColor(.gray)
                    }
                    .onSubmit {
                        if game.math.answer == Int(textInput)  { // 입력된 값이 정답일 때
                            textInput = "" // TextField 값 초기화
                            game.generateExpression()
                            game.increaseRound()
                        } else {
                            print("정답이 아닙닌다 ㅠㅠㅠ")
                        }
                        
                    }
                Spacer()
            }
            .padding(.horizontal, 20)
            .responsiveTextify(40, .regular)
        }
        .foregroundColor(.lightDark)
        .aspectRatio(190/70, contentMode: .fit)
        .padding(.horizontal, 32)
    }
}

```

## VIEW MODEL
```swift
//
//  Math.swift
//  Alarm
//
//  Created by 이해주 on 2022/01/24.
//

import SwiftUI

class Math: ObservableObject {
    typealias Math = MathModel.MathGame
    
    @Published var isFinished = false // 게임 종료 여부
    @Published private(set) var currentRound: Int = 1
    @Published private(set) var totalRound:Int
    let level: Int
    @Published var model: MathModel
    
    var math: Math {
        model.mathGame
    }
    
    init(totalRound: Int, level: Int) {
        self.totalRound = totalRound
        self.level = level
        self.model = MathModel(level: level)
    }
    
    //MARK: - Intent
    

    // 현재 라운드 수 증가
    func increaseRound() {
        if currentRound < totalRound {
            currentRound += 1
        } else {
            isFinished = true
        }
    }
    
    // 새로운 수식을 generate
    func generateExpression() {
        model.generateExpression(level: level)
    }
}
```

## MODEL
```swift
//
//  수학 게임에서 사용되는 모델
//  Created by 이해주 on 2022/01/24.
//

// "6 + 2", "12 + 7", "43 + 29", "3 X 21 + 46", "21 X 3 X 9"

import Foundation

struct MathModel {    
    var oneDigitNum1 = Int.random(in: 1..<10)
    var oneDigitNum2 = Int.random(in: 1..<10)
    var twoDigitNum1 = Int.random(in: 10..<20)
    var twoDigitNum2 = Int.random(in: 10..<20)
    var mathGame: MathGame
    
    func answerOnSubmit(_ answer: Int) {
        print(answer)
    }
    
    mutating func generateExpression(level: Int) {
        // 각 자릿수 숫자를 초기화
        oneDigitNum1 = Int.random(in: 1..<10)
        oneDigitNum2 = Int.random(in: 1..<10)
        twoDigitNum1 = Int.random(in: 10..<20)
        twoDigitNum2 = Int.random(in: 10..<20)
        
        // 초기화된 각 자릿수 숫자 인자값으로 store data를 initialize 진행
        switch level {
        case 0: // ex) 6 + 2
            mathGame = MathGame(firstN: oneDigitNum1, secondN: oneDigitNum2, thirdN: nil, answer: oneDigitNum1 + oneDigitNum2)
        case 1: // ex) 12 + 7
            mathGame = MathGame(firstN: twoDigitNum1, secondN: oneDigitNum1, thirdN: nil, answer: twoDigitNum1 + oneDigitNum1)
        case 2: // ex) 43 + 29
            mathGame = MathGame(firstN: twoDigitNum1, secondN: twoDigitNum2, thirdN: nil, answer: twoDigitNum1 + twoDigitNum2)
        case 3: // ex) 3 X 21 + 46
            mathGame = MathGame(firstN: oneDigitNum1, secondN: twoDigitNum1, thirdN: twoDigitNum2, answer: oneDigitNum1 * twoDigitNum1 + twoDigitNum2)
        case 4: // ex) 21 X 3 X 9
            mathGame = MathGame(firstN: twoDigitNum1, secondN: oneDigitNum1, thirdN: oneDigitNum2, answer: twoDigitNum1 * oneDigitNum1 * oneDigitNum2)
            
        default:
            mathGame = MathGame(firstN: oneDigitNum1, secondN: oneDigitNum2, thirdN: nil, answer: oneDigitNum1 + oneDigitNum2)
        }
    }
    
    mutating func generateNumber() {
        print(oneDigitNum1)
        oneDigitNum1 = Int.random(in: 1..<10)
    }
        
    
    // 선택된 레벨에 따라 계산에 사용되는 인자값이 다르게 initialize됨.
    init(level: Int) {
        switch level {
        case 0: // ex) 6 + 2
            mathGame = MathGame(firstN: oneDigitNum1, secondN: oneDigitNum2, thirdN: nil, answer: oneDigitNum1 + oneDigitNum2)
        case 1: // ex) 12 + 7
            mathGame = MathGame(firstN: twoDigitNum1, secondN: oneDigitNum1, thirdN: nil, answer: twoDigitNum1 + oneDigitNum1)
        case 2: // ex) 43 + 29
            mathGame = MathGame(firstN: twoDigitNum1, secondN: twoDigitNum2, thirdN: nil, answer: twoDigitNum1 + twoDigitNum2)
        case 3: // ex) 3 X 21 + 46
            mathGame = MathGame(firstN: oneDigitNum1, secondN: twoDigitNum1, thirdN: twoDigitNum2, answer: oneDigitNum1 * twoDigitNum1 + twoDigitNum2)
        case 4: // ex) 21 X 3 X 9
            mathGame = MathGame(firstN: twoDigitNum1, secondN: oneDigitNum1, thirdN: oneDigitNum2, answer: twoDigitNum1 * oneDigitNum1 * oneDigitNum2)
            
        default:
            mathGame = MathGame(firstN: oneDigitNum1, secondN: oneDigitNum2, thirdN: nil, answer: oneDigitNum1 + oneDigitNum2)
        }
    }
    
   
    


    struct MathGame {
        var firstN: Int
        var secondN: Int
        var thirdN : Int? // 문제 난이도에 따라 3번 째 인자값이 없을 수 있음
        var answer: Int // 문제 정답
   
    }
    
}
```


## Commits
<a href="https://github.com/Joo-esc/SwiftUi_MissionBased_AlarmApp_Project/commit/0553a4ce763429c728e5a77c8402744d4d47dd3f">미션 종류에 따라 Indicator 예외 처리 진행</a>

<a href="https://github.com/Joo-esc/SwiftUi_MissionBased_AlarmApp_Project/commit/795a2fdea9c92751c18c9749aac5b65a774ad089">수학 게임 MVVM 아키텍쳐 적용, 선택된 난이도에 따라 genrate되는 수학 표현식이 달라짐.</a>

<a href="https://github.com/Joo-esc/SwiftUi_MissionBased_AlarmApp_Project/commit/795a2fdea9c92751c18c9749aac5b65a774ad089">수학 게임 로직 완성, 네비게이션 스타일링 진행.</a>

<a href="https://github.com/Joo-esc/SwiftUi_MissionBased_AlarmApp_Project/commit/33b4fc1479777ea04707b91156632afb0051593d">[1차 프로젝트 완료]</a>

